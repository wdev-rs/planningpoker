import{o as n,c as i,a as e,t as _,d as g,n as f,u as b,e as r,s as d,r as S,w as k,v as x,f as A,F as u,g as w,h}from"./index-4977039b.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";const P={props:{points:null,name:"Anonymous",isSelected:!1,isRevealed:!1,isReady:!1}},R={class:"w3-container w3-center"},C={key:0,class:"w3-container w3-center"},E={class:"points"},I={key:1,class:"w3-container w3-center"},G={key:0,class:"points"};function M(a,t,o,y,c,l){return n(),i("div",{class:f(["card w3-card w3-yellow w3-round-large",{selected:o.isSelected}]),onClick:t[0]||(t[0]=m=>a.$emit("point-selected",o.points))},[e("header",R,[e("h1",null,_(o.name?o.name:" "),1)]),o.isRevealed?(n(),i("div",C,[e("span",E,_(o.points?o.points:"?"),1)])):(n(),i("div",I,[o.isReady?(n(),i("span",G,"👍")):g("",!0)]))],2)}const V=v(P,[["render",M],["__scopeId","data-v-c68e44a6"]]),N="paying",p="revealed",T={components:{Card:V},data(){return{player_id:null,game_id:null,name:"",points:null,showModal:!1}},mounted(){this.game_id=this.$route.params.id,this.player_id=sessionStorage.getItem(this.game_id+"_player_id"),sessionStorage.getItem(this.game_id+"_player_name")&&(this.name=sessionStorage.getItem(this.game_id+"_player_name")),this.player_id||(this.player_id=b(16),sessionStorage.setItem(this.game_id+"_player_id",this.player_id)),r.auth={game_id:this.$route.params.id,player_id:this.player_id},r.connect(),this.name?this.joinGame():this.showModal=!0,r.on("reveal",(...a)=>{d.game.status=p}),r.on("reset",(...a)=>{this.selecteblePoints=null,d.game.status=N})},methods:{joinGame(){r.emit("join",{name:this.name},a=>{d.isAdmin=a.isAdmin}),sessionStorage.setItem(this.game_id+"_player_name",this.name)},sendPoints(){r.emit("points",{points:this.points})},setPoints(a){this.isRevealed||(this.points!=a?this.points=a:this.points=null,this.sendPoints())},reveal(){r.emit("reveal")},reset(){this.points=null,r.emit("reset")}},computed:{connected(){return d.connected},players(){return d.players},game(){return d.game},isRevealed(){return d.game.status===p},isAdmin(){return d.isAdmin},selectablePoints(){return[1,2,3,5,8,13]}}},j={class:"w3-container w3-auto w3-margin-top"},B={key:0,class:"w3-row"},D={class:"w3-col l2"},L={class:"w3-col l2"},U=e("div",{class:"w3-col l2"},[e("a",{href:"/",class:"w3-button w3-xlarge w3-round-xlarge w3-red"},"End the game")],-1),z={class:"w3-modal-content w3-round"},F={class:"w3-container"},q=e("span",{onclick:"document.getElementById('id01').style.display='none'",class:"w3-button w3-display-topright"},"×",-1),J={class:"w3-section"},Y=e("label",null,[e("b",null,"Name")],-1),H={class:"w3-container w3-auto w3-margin-top"},K={class:"w3-container w3-cell"},O={class:"w3-container w3-auto w3-margin-top"},Q={class:"w3-container w3-cell"};function W(a,t,o,y,c,l){const m=S("card");return n(),i("main",null,[e("div",j,[l.isAdmin?(n(),i("div",B,[e("div",D,[e("button",{class:"w3-button w3-xlarge w3-round-xlarge w3-green",onClick:t[0]||(t[0]=(...s)=>l.reveal&&l.reveal(...s))},"Reveal")]),e("div",L,[e("button",{class:"w3-button w3-xlarge w3-round-xlarge w3-blue",onClick:t[1]||(t[1]=(...s)=>l.reset&&l.reset(...s))},"Restart")]),U])):g("",!0)]),e("div",{id:"id01",class:"w3-modal",style:A(c.showModal?"display: block":"display: none")},[e("div",z,[e("div",F,[q,e("div",J,[Y,k(e("input",{class:"w3-input w3-border w3-margin-bottom",type:"text",placeholder:"Enter name",name:"usrname",required:"","onUpdate:modelValue":t[2]||(t[2]=s=>c.name=s)},null,512),[[x,c.name]]),e("button",{onClick:t[3]||(t[3]=s=>{c.showModal=!1,this.joinGame()}),class:"w3-button w3-block w3-green w3-section w3-padding w3-round",type:"submit"},"Join")])])])],4),e("div",H,[(n(!0),i(u,null,w(l.players,s=>(n(),i("div",K,[h(m,{name:s.name,points:s.points,"is-revealed":this.isRevealed,"is-ready":s.points},null,8,["name","points","is-revealed","is-ready"])]))),256))]),e("div",O,[(n(!0),i(u,null,w(l.selectablePoints,s=>(n(),i("div",Q,[h(m,{name:"",points:s,onPointSelected:l.setPoints,"is-selected":this.points===s,"is-revealed":"true"},null,8,["points","onPointSelected","is-selected"])]))),256))])])}const $=v(T,[["render",W]]);export{$ as default};
