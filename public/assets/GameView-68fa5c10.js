import{u as y,d as n,s as a,o as r,c as l,a as t,b as h,t as m,w as u,v as _,e as p,F as v,r as c}from"./index-fe63be62.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";const k="paying",g="revealed",A={data(){return{player_id:null,game_id:null,name:"",points:null}},mounted(){this.game_id=this.$route.params.id,this.player_id=sessionStorage.getItem(this.game_id+"_player_id"),sessionStorage.getItem(this.game_id+"_player_name")&&(this.name=sessionStorage.getItem(this.game_id+"_player_name")),this.player_id||(this.player_id=y(16),sessionStorage.setItem(this.game_id+"_player_id",this.player_id)),n.auth={game_id:this.$route.params.id,player_id:this.player_id},n.connect(),this.name&&this.joinGame(),n.on("reveal",(...o)=>{a.game.status=g}),n.on("reset",(...o)=>{this.points=null,a.game.status=k})},methods:{joinGame(){n.emit("join",{name:this.name},o=>{a.isAdmin=o.isAdmin}),sessionStorage.setItem(this.game_id+"_player_name",this.name)},sendPoints(){n.emit("points",{points:this.points})},reveal(){n.emit("reveal")},reset(){this.points=null,n.emit("reset")}},computed:{connected(){return a.connected},players(){return a.players},game(){return a.game},isRevealed(){return a.game.status===g},isAdmin(){return a.isAdmin}}},S=t("a",{href:"/"},"End the game",-1),G=t("label",{for:"name"},"Name: ",-1),b={key:0},E=t("label",{for:"name"},"Point: ",-1),V={key:1},x=t("div",null,"Players",-1),I={key:0},P={key:1};function R(o,s,T,j,d,i){return r(),l("main",null,[t("div",null,[h("Gameee id="+m(o.$route.params.id)+" ",1),S]),t("div",null,[G,u(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>d.name=e)},null,512),[[_,d.name]]),t("button",{onClick:s[1]||(s[1]=(...e)=>i.joinGame&&i.joinGame(...e))},"Join")]),i.isRevealed?p("",!0):(r(),l("div",b,[E,u(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=e=>d.points=e)},null,512),[[_,d.points]]),t("button",{onClick:s[3]||(s[3]=(...e)=>i.sendPoints&&i.sendPoints(...e))},"Send")])),i.isAdmin?(r(),l("div",V,[t("div",null,[t("button",{onClick:s[4]||(s[4]=(...e)=>i.reveal&&i.reveal(...e))},"Reveal")]),t("div",null,[t("button",{onClick:s[5]||(s[5]=(...e)=>i.reset&&i.reset(...e))},"Reset")])])):p("",!0),x,(r(!0),l(v,null,c(i.players,e=>(r(),l("div",null,[t("span",null,m(e.name),1),i.isRevealed?(r(),l("span",I," : "+m(e.points),1)):(r(),l("span",P,m(e.points>0?"*":""),1))]))),256))])}const U=f(A,[["render",R]]);export{U as default};
