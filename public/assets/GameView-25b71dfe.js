import{o as l,c as d,a as s,t as _,b as y,n as w,u as k,d as r,s as c,r as f,w as C,v as M,e as S,f as P,F as h,g as p,h as u,p as x,i as A}from"./index-08efcf95.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";const I={props:{points:null,name:"Anonymous",isSelected:!1,isRevealed:!1,isReady:!1,isMyCard:!1,isBottomCard:!1}},R={class:"w3-container w3-center"},G={key:0,class:"w3-container w3-center"},B={class:"points"},E={key:1,class:"w3-container w3-center"},D={key:0,class:"points"};function V(e,n,a,b,i,o){return l(),d("div",{class:w(["w3-card w3-yellow w3-round-large card",{selected:a.isSelected,"w3-border w3-border-green":a.isMyCard,"bottom-card":a.isBottomCard}]),onClick:n[0]||(n[0]=m=>e.$emit("point-selected",a.points))},[s("header",R,[s("h4",null,_(a.name?a.name:" "),1)]),a.isRevealed?(l(),d("div",G,[s("span",B,_(a.points?a.points:"?"),1)])):(l(),d("div",E,[a.isReady?(l(),d("span",D,"👍")):y("",!0)]))],2)}const T=v(I,[["render",V],["__scopeId","data-v-e6122654"]]);const j="paying",g="revealed",F={components:{Card:T},data(){return{player_id:null,game_id:null,name:"",points:null,showModal:!1,bonusPoint:null,darkMode:!1,shake_it_player_id:null}},mounted(){this.game_id=this.$route.params.id,this.selectBonusPoint(),this.player_id=sessionStorage.getItem(this.game_id+"_player_id"),sessionStorage.getItem(this.game_id+"_player_name")&&(this.name=sessionStorage.getItem(this.game_id+"_player_name")),this.player_id||(this.player_id=k(16),sessionStorage.setItem(this.game_id+"_player_id",this.player_id)),r.auth={game_id:this.$route.params.id,player_id:this.player_id},r.connect(),this.name?this.joinGame():this.showModal=!0,r.on("reveal",(...e)=>{c.game.status=g}),r.on("reset",(...e)=>{this.points=null,this.selectBonusPoint(),c.game.status=j}),r.on("shake",(...e)=>{this.shake_it_player_id=e.pop(),setTimeout(()=>this.shake_it_player_id=null,1e3)})},methods:{joinGame(){r.emit("join",{name:this.name},e=>{c.isAdmin=e.isAdmin}),sessionStorage.setItem(this.game_id+"_player_name",this.name)},sendPoints(){r.emit("points",{points:this.points})},setPoints(e){this.isRevealed||(this.points!=e?this.points=e:this.points=null,this.sendPoints())},reveal(){r.emit("reveal")},reset(){r.emit("reset")},selectBonusPoint(){let e=["🍺","🍨","☕","🌮","🍕","🍪","🍫"];this.bonusPoint=e[Math.floor(Math.random()*e.length)]},toggleDarkMode(){this.darkMode=!this.darkMode,this.darkMode?document.body.style.backgroundColor="#3C3C3C":document.body.style.backgroundColor="#FFF"},shake(e){e!==this.player_id&&r.emit("shake",e)}},computed:{connected(){return c.connected},players(){return c.players},game(){return c.game},isRevealed(){return c.game.status===g},isAdmin(){return c.isAdmin},selectablePoints(){return[1,2,3,5,8,13]}}},L=e=>(x("data-v-dcf16c03"),e=e(),A(),e),N={class:"w3-container w3-padding-top-16 w3-margin-top flexible-container"},U={key:0},z={class:"w3-modal-content w3-round",style:{"max-width":"450px"}},K={class:"w3-container"},q={class:"w3-section"},J=L(()=>s("label",null,[s("b",null,"Enter your name")],-1)),Y={class:"w3-container w3-margin-top w3-padding-32 flexible-container"},H={class:"w3-container w3-margin-top"},O={class:"w3-container w3-row w3-margin-top w3-padding-64 flexible-container"},Q={class:"w3-container w3-margin-top"},W={class:"w3-container w3-margin-top"};function X(e,n,a,b,i,o){const m=f("card");return l(),d("main",null,[s("div",N,[o.isAdmin?(l(),d("span",U,[s("button",{class:"w3-margin w3-button w3-large w3-round-large w3-green",onClick:n[0]||(n[0]=(...t)=>o.reveal&&o.reveal(...t))},"Reveal"),s("button",{class:"w3-margin w3-button w3-large w3-round-large w3-blue",onClick:n[1]||(n[1]=(...t)=>o.reset&&o.reset(...t))},"Restart")])):y("",!0),s("button",{class:"w3-margin w3-button w3-large w3-white w3-border w3-border-green w3-round-large w3-text-green",onClick:n[2]||(n[2]=t=>i.showModal=!0)},"Change my name"),s("button",{class:w(["w3-margin w3-button w3-large w3-border w3-border-green w3-round-large w3-text-green",{"w3-white":i.darkMode,"w3-black":!i.darkMode}]),onClick:n[3]||(n[3]=(...t)=>o.toggleDarkMode&&o.toggleDarkMode(...t))},_(i.darkMode?"Light mode":"Dark mode"),3)]),s("div",{id:"id01",class:"w3-modal",style:P(i.showModal?"display: block":"display: none")},[s("div",z,[s("div",K,[s("span",{onClick:n[4]||(n[4]=t=>{i.showModal=!1}),class:"w3-button w3-display-topright"},"×"),s("div",q,[J,C(s("input",{class:"w3-input w3-border w3-margin-bottom",type:"text",placeholder:"Enter your name",name:"playername",required:"","onUpdate:modelValue":n[5]||(n[5]=t=>i.name=t),onKeyup:n[6]||(n[6]=S(t=>{i.showModal=!1,this.joinGame()},["enter"]))},null,544),[[M,i.name]]),s("button",{onClick:n[7]||(n[7]=t=>{i.showModal=!1,this.joinGame()}),class:"w3-button w3-block w3-green w3-section w3-padding w3-round",type:"submit"},"Join ")])])])],4),s("div",Y,[(l(!0),d(h,null,p(o.players,t=>(l(),d("div",H,[u(m,{onClick:Z=>o.shake(t.player_id),class:w(this.shake_it_player_id===t.player_id?"shake":""),name:t.name,points:t.points,"is-revealed":this.isRevealed,"is-ready":t.points,"is-my-card":t.player_id===this.player_id},null,8,["onClick","class","name","points","is-revealed","is-ready","is-my-card"])]))),256))]),s("div",O,[(l(!0),d(h,null,p(o.selectablePoints,t=>(l(),d("div",Q,[u(m,{name:"",points:t,onPointSelected:o.setPoints,"is-selected":this.points===t,"is-revealed":"true","is-bottom-card":!0},null,8,["points","onPointSelected","is-selected"])]))),256)),s("div",W,[u(m,{name:"",points:i.bonusPoint,onPointSelected:o.setPoints,"is-selected":this.points===i.bonusPoint,"is-revealed":"true"},null,8,["points","onPointSelected","is-selected"])])])])}const te=v(F,[["render",X],["__scopeId","data-v-dcf16c03"]]);export{te as default};
