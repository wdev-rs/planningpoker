import{d as i,s as r,o,c as u,a as s,b as S,t as l,w as h,v as p,e as E,F as k,r as b}from"./index-0c988fe3.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";var a=256,c=[],v=256,_;for(;a--;)c[a]=(a+256).toString(16).substring(1);function G(d){var e=0,g=d||11;if(!_||a+g>v*2)for(_="",a=0;e<v;e++)_+=c[Math.random()*256|0];return _.substring(a,a+++g)}const I="paying",f="revealed",R={data(){return{user_id:null,game_id:null,name:"",points:null}},mounted(){this.game_id=this.$route.params.id,this.user_id=sessionStorage.getItem(this.game_id+"_user_id"),sessionStorage.getItem(this.game_id+"_user_name")&&(this.name=sessionStorage.getItem(this.game_id+"_user_name")),this.user_id||(this.user_id="user_"+G(16),sessionStorage.setItem(this.game_id+"_user_id",this.user_id)),i.auth={game_id:this.$route.params.id,user_id:this.user_id},i.connect(),i.on("reveal",(...d)=>{r.game.status=f}),i.on("reset",(...d)=>{this.points=null,r.game.status=I})},methods:{joinGame(){i.emit("join",{user_id:this.user_id,name:this.name}),sessionStorage.setItem(this.game_id+"_user_name",this.name)},sendPoints(){i.emit("points",{user_id:this.user_id,name:this.name,points:this.points})},reveal(){i.emit("reveal")},reset(){this.points=null,i.emit("reset")}},computed:{connected(){return r.connected},greetings(){return r.greetEvents},users(){return r.users},game(){return r.game},isRevealed(){return r.game.status===f}}},V=s("a",{href:"/"},"End the game",-1),x=s("label",{for:"name"},"Name: ",-1),A={key:0},P=s("label",{for:"name"},"Point: ",-1),T=s("div",null,"Players",-1),C={key:0},N={key:1};function U(d,e,g,j,m,n){return o(),u("main",null,[s("div",null,[S("Gameee id="+l(d.$route.params.id)+" ",1),V]),s("div",null,[x,h(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>m.name=t)},null,512),[[p,m.name]]),s("button",{onClick:e[1]||(e[1]=(...t)=>n.joinGame&&n.joinGame(...t))},"Join")]),n.isRevealed?E("",!0):(o(),u("div",A,[P,h(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>m.points=t)},null,512),[[p,m.points]]),s("button",{onClick:e[3]||(e[3]=(...t)=>n.sendPoints&&n.sendPoints(...t))},"Send")])),s("div",null,[s("button",{onClick:e[4]||(e[4]=(...t)=>n.reveal&&n.reveal(...t))},"Reveal")]),s("div",null,[s("button",{onClick:e[5]||(e[5]=(...t)=>n.reset&&n.reset(...t))},"Reset")]),T,(o(!0),u(k,null,b(n.users,t=>(o(),u("div",null,[s("span",null,l(t.name),1),n.isRevealed?(o(),u("span",C," : "+l(t.points),1)):(o(),u("span",N,l(t.points>0?"*":""),1))]))),256))])}const D=y(R,[["render",U]]);export{D as default};
