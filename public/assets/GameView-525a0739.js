import{o as l,c as r,a as e,t as _,b as g,n as b,u as f,d,s as c,r as S,w as P,v as C,e as k,f as M,F as w,g as p,h as u,p as x,i as A}from"./index-f8c6eb26.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";const I={props:{points:null,name:"Anonymous",isSelected:!1,isRevealed:!1,isReady:!1,isMyCard:!1,isBottomCard:!1}},R={class:"w3-container w3-center"},G={key:0,class:"w3-container w3-center"},B={class:"points"},E={key:1,class:"w3-container w3-center"},V={key:0,class:"points"};function j(n,t,i,v,o,a){return l(),r("div",{class:b(["w3-card w3-yellow w3-round-large card",{selected:i.isSelected,"w3-border w3-border-green":i.isMyCard,"bottom-card":i.isBottomCard}]),onClick:t[0]||(t[0]=m=>n.$emit("point-selected",i.points))},[e("header",R,[e("h4",null,_(i.name?i.name:" "),1)]),i.isRevealed?(l(),r("div",G,[e("span",B,_(i.points?i.points:"?"),1)])):(l(),r("div",E,[i.isReady?(l(),r("span",V,"👍")):g("",!0)]))],2)}const T=y(I,[["render",j],["__scopeId","data-v-e6122654"]]);const N="paying",h="revealed",D={components:{Card:T},data(){return{player_id:null,game_id:null,name:"",points:null,showModal:!1,bonusPoint:null}},mounted(){this.game_id=this.$route.params.id,this.selectBonusPoint(),this.player_id=sessionStorage.getItem(this.game_id+"_player_id"),sessionStorage.getItem(this.game_id+"_player_name")&&(this.name=sessionStorage.getItem(this.game_id+"_player_name")),this.player_id||(this.player_id=f(16),sessionStorage.setItem(this.game_id+"_player_id",this.player_id)),d.auth={game_id:this.$route.params.id,player_id:this.player_id},d.connect(),this.name?this.joinGame():this.showModal=!0,d.on("reveal",(...n)=>{c.game.status=h}),d.on("reset",(...n)=>{this.points=null,this.selectBonusPoint(),c.game.status=N})},methods:{joinGame(){d.emit("join",{name:this.name},n=>{c.isAdmin=n.isAdmin}),sessionStorage.setItem(this.game_id+"_player_name",this.name)},sendPoints(){d.emit("points",{points:this.points})},setPoints(n){this.isRevealed||(this.points!=n?this.points=n:this.points=null,this.sendPoints())},reveal(){d.emit("reveal")},reset(){d.emit("reset")},selectBonusPoint(){let n=["🍺","🍨","☕","🌮","🍕","🍪","🍫"];this.bonusPoint=n[Math.floor(Math.random()*n.length)]}},computed:{connected(){return c.connected},players(){return c.players},game(){return c.game},isRevealed(){return c.game.status===h},isAdmin(){return c.isAdmin},selectablePoints(){return[1,2,3,5,8,13]}}},L=n=>(x("data-v-7a83eb20"),n=n(),A(),n),U={class:"w3-container w3-padding-top-16 w3-margin-top flexible-container"},z={key:0},F={class:"w3-modal-content w3-round",style:{"max-width":"450px"}},K={class:"w3-container"},q={class:"w3-section"},J=L(()=>e("label",null,[e("b",null,"Enter your name")],-1)),Y={class:"w3-container w3-margin-top w3-padding-32 flexible-container"},H={class:"w3-container w3-margin-top"},O={class:"w3-container w3-row w3-margin-top w3-padding-64 flexible-container"},Q={class:"w3-container w3-margin-top"},W={class:"w3-container w3-margin-top"};function X(n,t,i,v,o,a){const m=S("card");return l(),r("main",null,[e("div",U,[a.isAdmin?(l(),r("span",z,[e("button",{class:"w3-margin w3-button w3-large w3-round-large w3-green",onClick:t[0]||(t[0]=(...s)=>a.reveal&&a.reveal(...s))},"Reveal"),e("button",{class:"w3-margin w3-button w3-large w3-round-large w3-blue",onClick:t[1]||(t[1]=(...s)=>a.reset&&a.reset(...s))},"Restart")])):g("",!0),e("button",{class:"w3-margin w3-button w3-large w3-white w3-border w3-border-green w3-round-large w3-text-green",onClick:t[2]||(t[2]=s=>o.showModal=!0)},"Change my name")]),e("div",{id:"id01",class:"w3-modal",style:M(o.showModal?"display: block":"display: none")},[e("div",F,[e("div",K,[e("span",{onClick:t[3]||(t[3]=s=>{o.showModal=!1}),class:"w3-button w3-display-topright"},"×"),e("div",q,[J,P(e("input",{class:"w3-input w3-border w3-margin-bottom",type:"text",placeholder:"Enter your name",name:"usrname",required:"","onUpdate:modelValue":t[4]||(t[4]=s=>o.name=s),onKeyup:t[5]||(t[5]=k(s=>{o.showModal=!1,this.joinGame()},["enter"]))},null,544),[[C,o.name]]),e("button",{onClick:t[6]||(t[6]=s=>{o.showModal=!1,this.joinGame()}),class:"w3-button w3-block w3-green w3-section w3-padding w3-round",type:"submit"},"Join ")])])])],4),e("div",Y,[(l(!0),r(w,null,p(a.players,s=>(l(),r("div",H,[u(m,{name:s.name,points:s.points,"is-revealed":this.isRevealed,"is-ready":s.points,"is-my-card":s.player_id===this.player_id},null,8,["name","points","is-revealed","is-ready","is-my-card"])]))),256))]),e("div",O,[(l(!0),r(w,null,p(a.selectablePoints,s=>(l(),r("div",Q,[u(m,{name:"",points:s,onPointSelected:a.setPoints,"is-selected":this.points===s,"is-revealed":"true","is-bottom-card":!0},null,8,["points","onPointSelected","is-selected"])]))),256)),e("div",W,[u(m,{name:"",points:o.bonusPoint,onPointSelected:a.setPoints,"is-selected":this.points===o.bonusPoint,"is-revealed":"true"},null,8,["points","onPointSelected","is-selected"])])])])}const ee=y(D,[["render",X],["__scopeId","data-v-7a83eb20"]]);export{ee as default};
